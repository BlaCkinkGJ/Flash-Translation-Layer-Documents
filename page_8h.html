<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Flash Translation Layer: include/page.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Flash Translation Layer
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">page.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>declaration of data structures and macros for page ftl  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;glib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="flash_8h_source.html">flash.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="device_8h_source.html">device.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for page.h:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h__incl.png" border="0" usemap="#include_2page_8h" alt=""/></div>
<map name="include_2page_8h" id="include_2page_8h">
<area shape="rect" id="node7" href="flash_8h.html" title="generic flash control interfaces&#39; header " alt="" coords="114,80,175,107"/>
<area shape="rect" id="node9" href="device_8h.html" title="contain the device information header " alt="" coords="207,80,277,107"/>
<area shape="rect" id="node10" href="log_8h.html" title="include/log.h" alt="" coords="195,155,289,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h__dep__incl.png" border="0" usemap="#include_2page_8hdep" alt=""/></div>
<map name="include_2page_8hdep" id="include_2page_8hdep">
<area shape="rect" id="node2" href="page-core_8c.html" title="core logic for page ftl " alt="" coords="5,80,143,107"/>
<area shape="rect" id="node3" href="page-gc_8c.html" title="garbage collection logic for page ftl " alt="" coords="167,80,293,107"/>
<area shape="rect" id="node4" href="page-interface_8c.html" title="interface for page ftl " alt="" coords="318,80,481,107"/>
<area shape="rect" id="node5" href="page-map_8c.html" title="manage the mapping information " alt="" coords="505,80,643,107"/>
<area shape="rect" id="node6" href="page-read_8c.html" title="read logic for page ftl " alt="" coords="667,80,804,107"/>
<area shape="rect" id="node7" href="page-write_8c.html" title="write logic for page ftl " alt="" coords="828,80,968,107"/>
<area shape="rect" id="node8" href="module_8c.html" title="this deal the initialization and removing of the module " alt="" coords="992,80,1121,107"/>
<area shape="rect" id="node9" href="main_8c.html" title="main program for test the interface " alt="" coords="1146,80,1207,107"/>
</map>
</div>
</div>
<p><a href="page_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpage__ftl__segment.html">page_ftl_segment</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">segment information structure  <a href="structpage__ftl__segment.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpage__ftl.html">page_ftl</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">contain the page flash translation layer information  <a href="structpage__ftl.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a68b484700da42122cc27fbea34b19a52"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a68b484700da42122cc27fbea34b19a52">PAGE_FTL_CACHE_SIZE</a>&#160;&#160;&#160;(2)</td></tr>
<tr class="separator:a68b484700da42122cc27fbea34b19a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30bd19795e7dcc34fe45ef6d8ea2a4ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a30bd19795e7dcc34fe45ef6d8ea2a4ca">PAGE_FTL_GC_RATIO</a></td></tr>
<tr class="separator:a30bd19795e7dcc34fe45ef6d8ea2a4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ac7345804ae3d9893483bd752f31d52"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a9ac7345804ae3d9893483bd752f31d52">PAGE_FTL_GC_THRESHOLD</a></td></tr>
<tr class="separator:a9ac7345804ae3d9893483bd752f31d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:abed82baf7f470b522273a3e37c24c600"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="page_8h.html#abed82baf7f470b522273a3e37c24c600aee20bdc4d85ef6e72f4ed8af5161f776">PAGE_FTL_IOCTL_TRIM</a> = 0
 }</td></tr>
<tr class="separator:abed82baf7f470b522273a3e37c24c600"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a60b9548425462b47fd41dd203b9e830b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a60b9548425462b47fd41dd203b9e830b">page_ftl_open</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *, const char *name, int flags)</td></tr>
<tr class="memdesc:a60b9548425462b47fd41dd203b9e830b"><td class="mdescLeft">&#160;</td><td class="mdescRight">allocate the page ftl structure's members  <a href="#a60b9548425462b47fd41dd203b9e830b">More...</a><br /></td></tr>
<tr class="separator:a60b9548425462b47fd41dd203b9e830b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a580695933ed48c004ed33e885863faae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a580695933ed48c004ed33e885863faae">page_ftl_close</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *)</td></tr>
<tr class="memdesc:a580695933ed48c004ed33e885863faae"><td class="mdescLeft">&#160;</td><td class="mdescRight">deallocate the page ftl structure's members  <a href="#a580695933ed48c004ed33e885863faae">More...</a><br /></td></tr>
<tr class="separator:a580695933ed48c004ed33e885863faae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0df90bf88b4ef0e2fdb8a4dd0e467e0a"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a0df90bf88b4ef0e2fdb8a4dd0e467e0a">page_ftl_submit_request</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *, struct <a class="el" href="structdevice__request.html">device_request</a> *)</td></tr>
<tr class="memdesc:a0df90bf88b4ef0e2fdb8a4dd0e467e0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">submit the request to the valid function  <a href="#a0df90bf88b4ef0e2fdb8a4dd0e467e0a">More...</a><br /></td></tr>
<tr class="separator:a0df90bf88b4ef0e2fdb8a4dd0e467e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73bf7114db73929c2d07a22ea85a7616"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a73bf7114db73929c2d07a22ea85a7616">page_ftl_write</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *, struct <a class="el" href="structdevice__request.html">device_request</a> *)</td></tr>
<tr class="memdesc:a73bf7114db73929c2d07a22ea85a7616"><td class="mdescLeft">&#160;</td><td class="mdescRight">the core logic for writing the request to the device.  <a href="#a73bf7114db73929c2d07a22ea85a7616">More...</a><br /></td></tr>
<tr class="separator:a73bf7114db73929c2d07a22ea85a7616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad33e4454ad38dad9964549b500fc3a0b"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#ad33e4454ad38dad9964549b500fc3a0b">page_ftl_read</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *, struct <a class="el" href="structdevice__request.html">device_request</a> *)</td></tr>
<tr class="memdesc:ad33e4454ad38dad9964549b500fc3a0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">the core logic for reading the request to the device.  <a href="#ad33e4454ad38dad9964549b500fc3a0b">More...</a><br /></td></tr>
<tr class="separator:ad33e4454ad38dad9964549b500fc3a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e1683807df964f9becfdfe16e6349a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a4e1683807df964f9becfdfe16e6349a4">page_ftl_module_init</a> (struct <a class="el" href="structflash__device.html">flash_device</a> *, uint64_t flags)</td></tr>
<tr class="memdesc:a4e1683807df964f9becfdfe16e6349a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize the page flash translation layer module  <a href="#a4e1683807df964f9becfdfe16e6349a4">More...</a><br /></td></tr>
<tr class="separator:a4e1683807df964f9becfdfe16e6349a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ff7ab007db571629f817d655d651365"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a7ff7ab007db571629f817d655d651365">page_ftl_module_exit</a> (struct <a class="el" href="structflash__device.html">flash_device</a> *)</td></tr>
<tr class="memdesc:a7ff7ab007db571629f817d655d651365"><td class="mdescLeft">&#160;</td><td class="mdescRight">free resources in the page flash translation layer module  <a href="#a7ff7ab007db571629f817d655d651365">More...</a><br /></td></tr>
<tr class="separator:a7ff7ab007db571629f817d655d651365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc805fb6f2376b37c31bec12fb7f8c55"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdevice__address.html">device_address</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#afc805fb6f2376b37c31bec12fb7f8c55">page_ftl_get_free_page</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *)</td></tr>
<tr class="memdesc:afc805fb6f2376b37c31bec12fb7f8c55"><td class="mdescLeft">&#160;</td><td class="mdescRight">get page from the segment  <a href="#afc805fb6f2376b37c31bec12fb7f8c55">More...</a><br /></td></tr>
<tr class="separator:afc805fb6f2376b37c31bec12fb7f8c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeeb8d41fa2a355257f9481f7dbebf5e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#afeeb8d41fa2a355257f9481f7dbebf5e">page_ftl_update_map</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *, size_t sector, uint32_t ppn)</td></tr>
<tr class="separator:afeeb8d41fa2a355257f9481f7dbebf5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8fa274108f6f54fc0ad4e352175109"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a1d8fa274108f6f54fc0ad4e352175109">page_ftl_segment_data_init</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *, struct <a class="el" href="structpage__ftl__segment.html">page_ftl_segment</a> *)</td></tr>
<tr class="memdesc:a1d8fa274108f6f54fc0ad4e352175109"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize the page ftl's segment data only  <a href="#a1d8fa274108f6f54fc0ad4e352175109">More...</a><br /></td></tr>
<tr class="separator:a1d8fa274108f6f54fc0ad4e352175109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3085b622a6c5e843fdae7e9ccd7a0581"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a3085b622a6c5e843fdae7e9ccd7a0581">page_ftl_do_gc</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *)</td></tr>
<tr class="memdesc:a3085b622a6c5e843fdae7e9ccd7a0581"><td class="mdescLeft">&#160;</td><td class="mdescRight">core logic of the garbage collection  <a href="#a3085b622a6c5e843fdae7e9ccd7a0581">More...</a><br /></td></tr>
<tr class="separator:a3085b622a6c5e843fdae7e9ccd7a0581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61bc58daf39db2b8c7f6bb19759009f6"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a61bc58daf39db2b8c7f6bb19759009f6">page_ftl_get_map_size</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl)</td></tr>
<tr class="separator:a61bc58daf39db2b8c7f6bb19759009f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1153880e7edfea4dbb8fcfd23efbfde"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde">page_ftl_get_lpn</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl, size_t sector)</td></tr>
<tr class="separator:aa1153880e7edfea4dbb8fcfd23efbfde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f8fcfefd88c6bc045a4f17bb2fa60b1"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1">page_ftl_get_page_offset</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl, size_t sector)</td></tr>
<tr class="separator:a1f8fcfefd88c6bc045a4f17bb2fa60b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7343608b290367f04e646ff9314b367"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page_8h.html#af7343608b290367f04e646ff9314b367">page_ftl_get_segment_number</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl, uintptr_t segment)</td></tr>
<tr class="separator:af7343608b290367f04e646ff9314b367"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>declaration of data structures and macros for page ftl </p>
<dl class="section author"><dt>Author</dt><dd>Gijun Oh </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2021-09-22 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a68b484700da42122cc27fbea34b19a52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68b484700da42122cc27fbea34b19a52">&#9670;&nbsp;</a></span>PAGE_FTL_CACHE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_FTL_CACHE_SIZE&#160;&#160;&#160;(2)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a30bd19795e7dcc34fe45ef6d8ea2a4ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30bd19795e7dcc34fe45ef6d8ea2a4ca">&#9670;&nbsp;</a></span>PAGE_FTL_GC_RATIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_FTL_GC_RATIO</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((double)30 /                                                          \</div><div class="line">     100)</div></div><!-- fragment --><p>maximum the number of segments garbage collected </p>

</div>
</div>
<a id="a9ac7345804ae3d9893483bd752f31d52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ac7345804ae3d9893483bd752f31d52">&#9670;&nbsp;</a></span>PAGE_FTL_GC_THRESHOLD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_FTL_GC_THRESHOLD</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((double)90 /                                                          \</div><div class="line">     100)</div></div><!-- fragment --><p>gc triggered when number of the remaining segments under threshold </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="abed82baf7f470b522273a3e37c24c600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abed82baf7f470b522273a3e37c24c600">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="abed82baf7f470b522273a3e37c24c600aee20bdc4d85ef6e72f4ed8af5161f776"></a>PAGE_FTL_IOCTL_TRIM&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a580695933ed48c004ed33e885863faae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a580695933ed48c004ed33e885863faae">&#9670;&nbsp;</a></span>page_ftl_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>deallocate the page ftl structure's members </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page ftl structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero to success, negative number to fail </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a580695933ed48c004ed33e885863faae_cgraph.png" border="0" usemap="#page_8h_a580695933ed48c004ed33e885863faae_cgraph" alt=""/></div>
<map name="page_8h_a580695933ed48c004ed33e885863faae_cgraph" id="page_8h_a580695933ed48c004ed33e885863faae_cgraph">
<area shape="rect" id="node2" href="page-core_8c.html#a60e6f0f95185fdb010a5bacb80ed30d0" title="deallocate the ftl&#39;s segments " alt="" coords="160,5,321,32"/>
<area shape="rect" id="node3" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="369,5,536,32"/>
</map>
</div>

</div>
</div>
<a id="a3085b622a6c5e843fdae7e9ccd7a0581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3085b622a6c5e843fdae7e9ccd7a0581">&#9670;&nbsp;</a></span>page_ftl_do_gc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_do_gc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>core logic of the garbage collection </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page FTL structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, negative number for fail </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a3085b622a6c5e843fdae7e9ccd7a0581_cgraph.png" border="0" usemap="#page_8h_a3085b622a6c5e843fdae7e9ccd7a0581_cgraph" alt=""/></div>
<map name="page_8h_a3085b622a6c5e843fdae7e9ccd7a0581_cgraph" id="page_8h_a3085b622a6c5e843fdae7e9ccd7a0581_cgraph">
<area shape="rect" id="node2" href="page-gc_8c.html#a0b583abec382c3d87f8c3c34c0c17c1f" title="the function which chooses the appropriate garbage collection target. " alt="" coords="170,21,330,48"/>
<area shape="rect" id="node4" href="page_8h.html#af7343608b290367f04e646ff9314b367" title="page_ftl_get_segment\l_number" alt="" coords="395,57,545,98"/>
<area shape="rect" id="node5" href="page-gc_8c.html#a18170bf83f356c8053389c06e06cbac4" title="core logic of the valid page copy " alt="" coords="164,224,336,251"/>
<area shape="rect" id="node29" href="page-gc_8c.html#a4d1363e2261e7f0d20b90e949707cb32" title="erase the garbage collection target segment " alt="" coords="1064,173,1228,200"/>
<area shape="rect" id="node31" href="page-core_8c.html#ac83a1e6226d94796ae5f6547f4a0d46e" title="initialize the page ftl&#39;s segment data only " alt="" coords="604,971,785,997"/>
<area shape="rect" id="node32" href="bits_8h.html#ad84d9bdcf049c4506dd5874cda1af75b" title="reset the index position bit in the array(uint64_t) " alt="" coords="214,376,286,403"/>
<area shape="rect" id="node3" href="page-gc_8c.html#a32e9cc6ed74c5738778258646318689c" title="page ftl gc list compare function " alt="" coords="397,5,543,32"/>
<area shape="rect" id="node6" href="page-gc_8c.html#a7b41b01d0db54c3dee22e70395069437" title="read the valid pages from the garbage collection target segment " alt="" coords="840,275,1009,301"/>
<area shape="rect" id="node14" href="page-gc_8c.html#a9009732dc94fb779c60c513436f64430" title="write valid page to the other segment. " alt="" coords="384,224,556,251"/>
<area shape="rect" id="node7" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="1704,616,1855,643"/>
<area shape="rect" id="node8" href="device_8c.html#ab0d1f54cae818ed37ccb6534be902a90" title="dynamic allocate the device request " alt="" coords="1282,261,1426,288"/>
<area shape="rect" id="node9" href="page-read_8c.html#a03ada441cc7b7264607a4f25210fee3d" title="the core logic for reading the request to the device. " alt="" coords="1096,496,1196,523"/>
<area shape="rect" id="node13" href="device_8c.html#a6cbe2f795a41e9ae8c71376e4795d92b" title="free pre&#45;allocated device_request resource " alt="" coords="1495,363,1633,389"/>
<area shape="rect" id="node10" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde" title="page_ftl_get_lpn" alt="" coords="1295,768,1413,795"/>
<area shape="rect" id="node11" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1" title="page_ftl_get_page_offset" alt="" coords="1480,565,1648,592"/>
<area shape="rect" id="node12" href="page-read_8c.html#afe456b0f3da74e3799f11e5a0ec9bf00" title="read&#39;s end request function " alt="" coords="1281,464,1427,491"/>
<area shape="rect" id="node15" href="page-write_8c.html#a0c8aa8e7f9a23fe3033211f0f03e03b0" title="the core logic for writing the request to the device. " alt="" coords="643,717,746,744"/>
<area shape="rect" id="node16" href="page_8h.html#a61bc58daf39db2b8c7f6bb19759009f6" title="page_ftl_get_map_size" alt="" coords="1276,869,1432,896"/>
<area shape="rect" id="node21" href="page-map_8c.html#a8fe47cde6e9eb1b204962acc947fdea1" title="get page from the segment " alt="" coords="1067,1021,1225,1048"/>
<area shape="rect" id="node25" href="page-write_8c.html#a09792980732a097d9cc66cb6c3c4040a" title="read sequence for overwrite " alt="" coords="833,556,1016,583"/>
<area shape="rect" id="node26" href="page-write_8c.html#a8d2d0a683ff0be97794fbb2e0ce6004f" title="write&#39;s end request function " alt="" coords="850,844,999,871"/>
<area shape="rect" id="node17" href="device_8h.html#a15af0f7c6b80a25259e946db845be12c" title="total size of a flash board " alt="" coords="1490,945,1638,972"/>
<area shape="rect" id="node18" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="1696,967,1863,993"/>
<area shape="rect" id="node19" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="1703,1115,1855,1157"/>
<area shape="rect" id="node20" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="1911,1115,2065,1157"/>
<area shape="rect" id="node22" href="bits_8h.html#ae60fba86e169d5ef568c6047af9cc63e" title="get the value at the index position bit in the array(uint64_t) " alt="" coords="1323,920,1385,947"/>
<area shape="rect" id="node23" href="bits_8h.html#a901b6fd3c6e09b38c7a27865af23eb92" title="find first zero bit in the array(uint64_t) " alt="" coords="1291,1021,1417,1048"/>
<area shape="rect" id="node24" href="bits_8h.html#aa5915f57e508850b40fd9e781dcfea87" title="set the index position bit in the array(uint64_t) " alt="" coords="1323,971,1385,997"/>
<area shape="rect" id="node27" href="page-write_8c.html#a0a11d5c177574a23b47088506c37cd06" title="invalidate a segment that including to the given LPN " alt="" coords="1081,971,1211,997"/>
<area shape="rect" id="node28" href="page-map_8c.html#aea2d0d45aa9856c1113d5344678a368e" title="update the mapping information " alt="" coords="1073,869,1219,896"/>
<area shape="rect" id="node30" href="page-gc_8c.html#a5313c350f6da799b37eb48aee2f56bb6" title="erase&#39;s end request function " alt="" coords="1277,185,1431,212"/>
</map>
</div>

</div>
</div>
<a id="afc805fb6f2376b37c31bec12fb7f8c55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc805fb6f2376b37c31bec12fb7f8c55">&#9670;&nbsp;</a></span>page_ftl_get_free_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdevice__address.html">device_address</a> page_ftl_get_free_page </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get page from the segment </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page-ftl structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>free space's device address </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_afc805fb6f2376b37c31bec12fb7f8c55_cgraph.png" border="0" usemap="#page_8h_afc805fb6f2376b37c31bec12fb7f8c55_cgraph" alt=""/></div>
<map name="page_8h_afc805fb6f2376b37c31bec12fb7f8c55_cgraph" id="page_8h_afc805fb6f2376b37c31bec12fb7f8c55_cgraph">
<area shape="rect" id="node2" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="211,5,377,32"/>
<area shape="rect" id="node3" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="218,57,370,98"/>
<area shape="rect" id="node5" href="bits_8h.html#ae60fba86e169d5ef568c6047af9cc63e" title="get the value at the index position bit in the array(uint64_t) " alt="" coords="263,123,325,149"/>
<area shape="rect" id="node6" href="bits_8h.html#a901b6fd3c6e09b38c7a27865af23eb92" title="find first zero bit in the array(uint64_t) " alt="" coords="231,173,357,200"/>
<area shape="rect" id="node7" href="bits_8h.html#aa5915f57e508850b40fd9e781dcfea87" title="set the index position bit in the array(uint64_t) " alt="" coords="263,224,325,251"/>
<area shape="rect" id="node4" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="425,57,580,98"/>
</map>
</div>

</div>
</div>
<a id="aa1153880e7edfea4dbb8fcfd23efbfde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1153880e7edfea4dbb8fcfd23efbfde">&#9670;&nbsp;</a></span>page_ftl_get_lpn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t page_ftl_get_lpn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>sector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_aa1153880e7edfea4dbb8fcfd23efbfde_cgraph.png" border="0" usemap="#page_8h_aa1153880e7edfea4dbb8fcfd23efbfde_cgraph" alt=""/></div>
<map name="page_8h_aa1153880e7edfea4dbb8fcfd23efbfde_cgraph" id="page_8h_aa1153880e7edfea4dbb8fcfd23efbfde_cgraph">
<area shape="rect" id="node2" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="171,5,321,32"/>
</map>
</div>

</div>
</div>
<a id="a61bc58daf39db2b8c7f6bb19759009f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61bc58daf39db2b8c7f6bb19759009f6">&#9670;&nbsp;</a></span>page_ftl_get_map_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t page_ftl_get_map_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a61bc58daf39db2b8c7f6bb19759009f6_cgraph.png" border="0" usemap="#page_8h_a61bc58daf39db2b8c7f6bb19759009f6_cgraph" alt=""/></div>
<map name="page_8h_a61bc58daf39db2b8c7f6bb19759009f6_cgraph" id="page_8h_a61bc58daf39db2b8c7f6bb19759009f6_cgraph">
<area shape="rect" id="node2" href="device_8h.html#a15af0f7c6b80a25259e946db845be12c" title="total size of a flash board " alt="" coords="209,67,357,93"/>
<area shape="rect" id="node6" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="413,123,564,149"/>
<area shape="rect" id="node3" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="405,5,572,32"/>
<area shape="rect" id="node4" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="413,57,565,98"/>
<area shape="rect" id="node5" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="620,57,775,98"/>
</map>
</div>

</div>
</div>
<a id="a1f8fcfefd88c6bc045a4f17bb2fa60b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f8fcfefd88c6bc045a4f17bb2fa60b1">&#9670;&nbsp;</a></span>page_ftl_get_page_offset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t page_ftl_get_page_offset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>sector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a1f8fcfefd88c6bc045a4f17bb2fa60b1_cgraph.png" border="0" usemap="#page_8h_a1f8fcfefd88c6bc045a4f17bb2fa60b1_cgraph" alt=""/></div>
<map name="page_8h_a1f8fcfefd88c6bc045a4f17bb2fa60b1_cgraph" id="page_8h_a1f8fcfefd88c6bc045a4f17bb2fa60b1_cgraph">
<area shape="rect" id="node2" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="221,5,372,32"/>
</map>
</div>

</div>
</div>
<a id="af7343608b290367f04e646ff9314b367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7343608b290367f04e646ff9314b367">&#9670;&nbsp;</a></span>page_ftl_get_segment_number()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t page_ftl_get_segment_number </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>segment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7ff7ab007db571629f817d655d651365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ff7ab007db571629f817d655d651365">&#9670;&nbsp;</a></span>page_ftl_module_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_module_exit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflash__device.html">flash_device</a> *&#160;</td>
          <td class="paramname"><em>flash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>free resources in the page flash translation layer module </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flash</td><td>pointer of the flash device information</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero to success, error number to fail</dd></dl>
<dl class="section note"><dt>Note</dt><dd>You must not free resources related on the flash module which is parent module </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a7ff7ab007db571629f817d655d651365_cgraph.png" border="0" usemap="#page_8h_a7ff7ab007db571629f817d655d651365_cgraph" alt=""/></div>
<map name="page_8h_a7ff7ab007db571629f817d655d651365_cgraph" id="page_8h_a7ff7ab007db571629f817d655d651365_cgraph">
<area shape="rect" id="node2" href="page-core_8c.html#abd22f5acb8a0cede652c46ee5229e504" title="deallocate the page ftl structure&#39;s members " alt="" coords="214,5,321,32"/>
<area shape="rect" id="node5" href="device_8c.html#adeffd903e3a445dbbd1305b6cfc9b54f" title="deallocate the device module " alt="" coords="199,56,336,83"/>
<area shape="rect" id="node3" href="page-core_8c.html#a60e6f0f95185fdb010a5bacb80ed30d0" title="deallocate the ftl&#39;s segments " alt="" coords="384,5,545,32"/>
<area shape="rect" id="node4" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="593,5,760,32"/>
</map>
</div>

</div>
</div>
<a id="a4e1683807df964f9becfdfe16e6349a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e1683807df964f9becfdfe16e6349a4">&#9670;&nbsp;</a></span>page_ftl_module_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_module_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflash__device.html">flash_device</a> *&#160;</td>
          <td class="paramname"><em>flash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize the page flash translation layer module </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flash</td><td>pointer of the flash device information </td></tr>
    <tr><td class="paramname">flags</td><td>flags for flash and submodule</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero to success, error number to fail </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a4e1683807df964f9becfdfe16e6349a4_cgraph.png" border="0" usemap="#page_8h_a4e1683807df964f9becfdfe16e6349a4_cgraph" alt=""/></div>
<map name="page_8h_a4e1683807df964f9becfdfe16e6349a4_cgraph" id="page_8h_a4e1683807df964f9becfdfe16e6349a4_cgraph">
<area shape="rect" id="node2" href="device_8c.html#ae00e848634098b2c178014084aaebbe5" title="initialize the device module " alt="" coords="201,5,334,32"/>
<area shape="rect" id="node4" href="page-interface_8c.html#a9b7209a032484206128890d785ba99c2" title="free resources in the page flash translation layer module " alt="" coords="195,56,340,83"/>
<area shape="rect" id="node3" href="device_8c.html#adeffd903e3a445dbbd1305b6cfc9b54f" title="deallocate the device module " alt="" coords="388,5,525,32"/>
<area shape="rect" id="node5" href="page-core_8c.html#abd22f5acb8a0cede652c46ee5229e504" title="deallocate the page ftl structure&#39;s members " alt="" coords="403,56,510,83"/>
<area shape="rect" id="node6" href="page-core_8c.html#a60e6f0f95185fdb010a5bacb80ed30d0" title="deallocate the ftl&#39;s segments " alt="" coords="573,56,735,83"/>
<area shape="rect" id="node7" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="783,56,949,83"/>
</map>
</div>

</div>
</div>
<a id="a60b9548425462b47fd41dd203b9e830b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60b9548425462b47fd41dd203b9e830b">&#9670;&nbsp;</a></span>page_ftl_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allocate the page ftl structure's members </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page ftl structure </td></tr>
    <tr><td class="paramname">name</td><td>file's name for open </td></tr>
    <tr><td class="paramname">flags</td><td>flags for open</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero to success, negative number to fail</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>you must make a recovery process </dd></dl>
<p>initialize the mapping table </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a60b9548425462b47fd41dd203b9e830b_cgraph.png" border="0" usemap="#page_8h_a60b9548425462b47fd41dd203b9e830b_cgraph" alt=""/></div>
<map name="page_8h_a60b9548425462b47fd41dd203b9e830b_cgraph" id="page_8h_a60b9548425462b47fd41dd203b9e830b_cgraph">
<area shape="rect" id="node2" href="page_8h.html#a61bc58daf39db2b8c7f6bb19759009f6" title="page_ftl_get_map_size" alt="" coords="1987,512,2143,539"/>
<area shape="rect" id="node4" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="2421,132,2588,159"/>
<area shape="rect" id="node8" href="page-core_8c.html#a0ca5832ac120621b6758f42b1bf34a0c" title="initialize each segment&#39;s metadata " alt="" coords="1990,259,2139,285"/>
<area shape="rect" id="node11" href="page-core_8c.html#a526b3bc932d94378272a2f898dbc6a14" title="do garbage collection thread " alt="" coords="156,949,288,976"/>
<area shape="rect" id="node41" href="page-core_8c.html#abd22f5acb8a0cede652c46ee5229e504" title="deallocate the page ftl structure&#39;s members " alt="" coords="356,5,463,32"/>
<area shape="rect" id="node3" href="device_8h.html#a15af0f7c6b80a25259e946db845be12c" title="total size of a flash board " alt="" coords="2209,512,2357,539"/>
<area shape="rect" id="node7" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="2429,892,2580,919"/>
<area shape="rect" id="node5" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="2429,378,2581,419"/>
<area shape="rect" id="node6" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="2636,378,2791,419"/>
<area shape="rect" id="node9" href="page-core_8c.html#aa74b6b9f6773b961bf1bb7d675870073" title="allocate the segment&#39;s bitmap " alt="" coords="2209,309,2357,336"/>
<area shape="rect" id="node10" href="page-core_8c.html#ac83a1e6226d94796ae5f6547f4a0d46e" title="initialize the page ftl&#39;s segment data only " alt="" coords="2192,360,2373,387"/>
<area shape="rect" id="node12" href="device_8h.html#ac5b7db8e4737e5887fb5fc21ec67ffe6" title="get total the number of pages in a flash board " alt="" coords="1985,917,2144,944"/>
<area shape="rect" id="node13" href="page-core_8c.html#a69bce08fb2866af2d8383db2c6e990d6" title="get number of invalid pages in the ftl " alt="" coords="544,990,681,1031"/>
<area shape="rect" id="node14" href="page-core_8c.html#a81269dd3e45836a6fa35f393529d3ed9" title="do garbage collection from the gc list " alt="" coords="336,917,483,944"/>
<area shape="rect" id="node15" href="page-core_8c.html#ab52afda690c5581b1d51778b8ff5d710" title="submit the request to the valid function " alt="" coords="531,917,695,944"/>
<area shape="rect" id="node16" href="page-write_8c.html#a0c8aa8e7f9a23fe3033211f0f03e03b0" title="the core logic for writing the request to the device. " alt="" coords="1392,841,1495,868"/>
<area shape="rect" id="node25" href="page-read_8c.html#a03ada441cc7b7264607a4f25210fee3d" title="the core logic for reading the request to the device. " alt="" coords="1805,1272,1905,1299"/>
<area shape="rect" id="node31" href="page-gc_8c.html#a39db89445047112690d03d8211a53966" title="core logic of the garbage collection " alt="" coords="768,715,879,741"/>
<area shape="rect" id="node17" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde" title="page_ftl_get_lpn" alt="" coords="2006,816,2123,843"/>
<area shape="rect" id="node18" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1" title="page_ftl_get_page_offset" alt="" coords="2199,1272,2367,1299"/>
<area shape="rect" id="node19" href="page-map_8c.html#a8fe47cde6e9eb1b204962acc947fdea1" title="get page from the segment " alt="" coords="1777,563,1934,589"/>
<area shape="rect" id="node23" href="page-write_8c.html#a09792980732a097d9cc66cb6c3c4040a" title="read sequence for overwrite " alt="" coords="1543,1019,1725,1045"/>
<area shape="rect" id="node27" href="device_8c.html#a6cbe2f795a41e9ae8c71376e4795d92b" title="free pre&#45;allocated device_request resource " alt="" coords="2213,1196,2352,1223"/>
<area shape="rect" id="node28" href="page-write_8c.html#a8d2d0a683ff0be97794fbb2e0ce6004f" title="write&#39;s end request function " alt="" coords="1559,765,1709,792"/>
<area shape="rect" id="node20" href="bits_8h.html#ae60fba86e169d5ef568c6047af9cc63e" title="get the value at the index position bit in the array(uint64_t) " alt="" coords="2034,664,2095,691"/>
<area shape="rect" id="node21" href="bits_8h.html#a901b6fd3c6e09b38c7a27865af23eb92" title="find first zero bit in the array(uint64_t) " alt="" coords="2002,563,2127,589"/>
<area shape="rect" id="node22" href="bits_8h.html#aa5915f57e508850b40fd9e781dcfea87" title="set the index position bit in the array(uint64_t) " alt="" coords="2034,613,2095,640"/>
<area shape="rect" id="node24" href="device_8c.html#ab0d1f54cae818ed37ccb6534be902a90" title="dynamic allocate the device request " alt="" coords="1993,1095,2137,1121"/>
<area shape="rect" id="node26" href="page-read_8c.html#afe456b0f3da74e3799f11e5a0ec9bf00" title="read&#39;s end request function " alt="" coords="1991,1247,2138,1273"/>
<area shape="rect" id="node29" href="page-write_8c.html#a0a11d5c177574a23b47088506c37cd06" title="invalidate a segment that including to the given LPN " alt="" coords="1790,613,1921,640"/>
<area shape="rect" id="node30" href="page-map_8c.html#aea2d0d45aa9856c1113d5344678a368e" title="update the mapping information " alt="" coords="1782,715,1929,741"/>
<area shape="rect" id="node32" href="page-gc_8c.html#a0b583abec382c3d87f8c3c34c0c17c1f" title="the function which chooses the appropriate garbage collection target. " alt="" coords="958,664,1118,691"/>
<area shape="rect" id="node34" href="page_8h.html#af7343608b290367f04e646ff9314b367" title="page_ftl_get_segment\l_number" alt="" coords="1183,699,1333,741"/>
<area shape="rect" id="node35" href="page-gc_8c.html#a18170bf83f356c8053389c06e06cbac4" title="core logic of the valid page copy " alt="" coords="952,816,1124,843"/>
<area shape="rect" id="node38" href="page-gc_8c.html#a4d1363e2261e7f0d20b90e949707cb32" title="erase the garbage collection target segment " alt="" coords="1773,1069,1937,1096"/>
<area shape="rect" id="node40" href="bits_8h.html#ad84d9bdcf049c4506dd5874cda1af75b" title="reset the index position bit in the array(uint64_t) " alt="" coords="1002,613,1074,640"/>
<area shape="rect" id="node33" href="page-gc_8c.html#a32e9cc6ed74c5738778258646318689c" title="page ftl gc list compare function " alt="" coords="1185,648,1331,675"/>
<area shape="rect" id="node36" href="page-gc_8c.html#a7b41b01d0db54c3dee22e70395069437" title="read the valid pages from the garbage collection target segment " alt="" coords="1549,1272,1719,1299"/>
<area shape="rect" id="node37" href="page-gc_8c.html#a9009732dc94fb779c60c513436f64430" title="write valid page to the other segment. " alt="" coords="1172,841,1344,868"/>
<area shape="rect" id="node39" href="page-gc_8c.html#a5313c350f6da799b37eb48aee2f56bb6" title="erase&#39;s end request function " alt="" coords="1988,1044,2141,1071"/>
<area shape="rect" id="node42" href="page-core_8c.html#a60e6f0f95185fdb010a5bacb80ed30d0" title="deallocate the ftl&#39;s segments " alt="" coords="743,5,904,32"/>
</map>
</div>

</div>
</div>
<a id="ad33e4454ad38dad9964549b500fc3a0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad33e4454ad38dad9964549b500fc3a0b">&#9670;&nbsp;</a></span>page_ftl_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t page_ftl_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdevice__request.html">device_request</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the core logic for reading the request to the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page FTL structure </td></tr>
    <tr><td class="paramname">request</td><td>user's request pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>reading data size. a negative number means fail to read. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_ad33e4454ad38dad9964549b500fc3a0b_cgraph.png" border="0" usemap="#page_8h_ad33e4454ad38dad9964549b500fc3a0b_cgraph" alt=""/></div>
<map name="page_8h_ad33e4454ad38dad9964549b500fc3a0b_cgraph" id="page_8h_ad33e4454ad38dad9964549b500fc3a0b_cgraph">
<area shape="rect" id="node2" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="564,28,715,55"/>
<area shape="rect" id="node3" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde" title="page_ftl_get_lpn" alt="" coords="373,28,491,55"/>
<area shape="rect" id="node4" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1" title="page_ftl_get_page_offset" alt="" coords="348,79,516,106"/>
<area shape="rect" id="node5" href="device_8c.html#ab0d1f54cae818ed37ccb6534be902a90" title="dynamic allocate the device request " alt="" coords="155,130,299,156"/>
<area shape="rect" id="node6" href="page-read_8c.html#afe456b0f3da74e3799f11e5a0ec9bf00" title="read&#39;s end request function " alt="" coords="153,180,300,207"/>
<area shape="rect" id="node7" href="device_8c.html#a6cbe2f795a41e9ae8c71376e4795d92b" title="free pre&#45;allocated device_request resource " alt="" coords="363,206,501,232"/>
</map>
</div>

</div>
</div>
<a id="a1d8fa274108f6f54fc0ad4e352175109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d8fa274108f6f54fc0ad4e352175109">&#9670;&nbsp;</a></span>page_ftl_segment_data_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_segment_data_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl__segment.html">page_ftl_segment</a> *&#160;</td>
          <td class="paramname"><em>segment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize the page ftl's segment data only </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page-ftl structure </td></tr>
    <tr><td class="paramname">segment</td><td>pointer of the target segment</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for successfully initialized </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a1d8fa274108f6f54fc0ad4e352175109_cgraph.png" border="0" usemap="#page_8h_a1d8fa274108f6f54fc0ad4e352175109_cgraph" alt=""/></div>
<map name="page_8h_a1d8fa274108f6f54fc0ad4e352175109_cgraph" id="page_8h_a1d8fa274108f6f54fc0ad4e352175109_cgraph">
<area shape="rect" id="node2" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="235,5,387,47"/>
<area shape="rect" id="node3" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="435,5,589,47"/>
</map>
</div>

</div>
</div>
<a id="a0df90bf88b4ef0e2fdb8a4dd0e467e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0df90bf88b4ef0e2fdb8a4dd0e467e0a">&#9670;&nbsp;</a></span>page_ftl_submit_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t page_ftl_submit_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdevice__request.html">device_request</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>submit the request to the valid function </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page ftl structure </td></tr>
    <tr><td class="paramname">request</td><td>pointer of the request</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>read and write return the size of the submit, fail to return the nugative value </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a0df90bf88b4ef0e2fdb8a4dd0e467e0a_cgraph.png" border="0" usemap="#page_8h_a0df90bf88b4ef0e2fdb8a4dd0e467e0a_cgraph" alt=""/></div>
<map name="page_8h_a0df90bf88b4ef0e2fdb8a4dd0e467e0a_cgraph" id="page_8h_a0df90bf88b4ef0e2fdb8a4dd0e467e0a_cgraph">
<area shape="rect" id="node2" href="page-write_8c.html#a0c8aa8e7f9a23fe3033211f0f03e03b0" title="the core logic for writing the request to the device. " alt="" coords="855,448,958,475"/>
<area shape="rect" id="node17" href="page-read_8c.html#a03ada441cc7b7264607a4f25210fee3d" title="the core logic for reading the request to the device. " alt="" coords="1308,549,1408,576"/>
<area shape="rect" id="node23" href="page-gc_8c.html#a39db89445047112690d03d8211a53966" title="core logic of the garbage collection " alt="" coords="217,852,328,879"/>
<area shape="rect" id="node3" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="1916,499,2067,525"/>
<area shape="rect" id="node4" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde" title="page_ftl_get_lpn" alt="" coords="1507,397,1625,424"/>
<area shape="rect" id="node5" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1" title="page_ftl_get_page_offset" alt="" coords="1692,499,1860,525"/>
<area shape="rect" id="node6" href="page_8h.html#a61bc58daf39db2b8c7f6bb19759009f6" title="page_ftl_get_map_size" alt="" coords="1488,347,1644,373"/>
<area shape="rect" id="node11" href="page-map_8c.html#a8fe47cde6e9eb1b204962acc947fdea1" title="get page from the segment " alt="" coords="1279,195,1437,221"/>
<area shape="rect" id="node15" href="page-write_8c.html#a09792980732a097d9cc66cb6c3c4040a" title="read sequence for overwrite " alt="" coords="1045,600,1228,627"/>
<area shape="rect" id="node19" href="device_8c.html#a6cbe2f795a41e9ae8c71376e4795d92b" title="free pre&#45;allocated device_request resource " alt="" coords="1707,752,1845,779"/>
<area shape="rect" id="node20" href="page-write_8c.html#a8d2d0a683ff0be97794fbb2e0ce6004f" title="write&#39;s end request function " alt="" coords="1062,372,1211,399"/>
<area shape="rect" id="node7" href="device_8h.html#a15af0f7c6b80a25259e946db845be12c" title="total size of a flash board " alt="" coords="1702,195,1850,221"/>
<area shape="rect" id="node8" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="1908,173,2075,200"/>
<area shape="rect" id="node9" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="1915,86,2067,127"/>
<area shape="rect" id="node10" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="2123,86,2277,127"/>
<area shape="rect" id="node12" href="bits_8h.html#ae60fba86e169d5ef568c6047af9cc63e" title="get the value at the index position bit in the array(uint64_t) " alt="" coords="1535,245,1597,272"/>
<area shape="rect" id="node13" href="bits_8h.html#a901b6fd3c6e09b38c7a27865af23eb92" title="find first zero bit in the array(uint64_t) " alt="" coords="1503,195,1629,221"/>
<area shape="rect" id="node14" href="bits_8h.html#aa5915f57e508850b40fd9e781dcfea87" title="set the index position bit in the array(uint64_t) " alt="" coords="1535,296,1597,323"/>
<area shape="rect" id="node16" href="device_8c.html#ab0d1f54cae818ed37ccb6534be902a90" title="dynamic allocate the device request " alt="" coords="1494,803,1638,829"/>
<area shape="rect" id="node18" href="page-read_8c.html#afe456b0f3da74e3799f11e5a0ec9bf00" title="read&#39;s end request function " alt="" coords="1493,549,1639,576"/>
<area shape="rect" id="node21" href="page-write_8c.html#a0a11d5c177574a23b47088506c37cd06" title="invalidate a segment that including to the given LPN " alt="" coords="1293,245,1423,272"/>
<area shape="rect" id="node22" href="page-map_8c.html#aea2d0d45aa9856c1113d5344678a368e" title="update the mapping information " alt="" coords="1285,347,1431,373"/>
<area shape="rect" id="node24" href="page-gc_8c.html#a0b583abec382c3d87f8c3c34c0c17c1f" title="the function which chooses the appropriate garbage collection target. " alt="" coords="382,852,542,879"/>
<area shape="rect" id="node26" href="page_8h.html#af7343608b290367f04e646ff9314b367" title="page_ftl_get_segment\l_number" alt="" coords="607,942,757,983"/>
<area shape="rect" id="node27" href="page-gc_8c.html#a18170bf83f356c8053389c06e06cbac4" title="core logic of the valid page copy " alt="" coords="376,801,548,828"/>
<area shape="rect" id="node30" href="page-gc_8c.html#a4d1363e2261e7f0d20b90e949707cb32" title="erase the garbage collection target segment " alt="" coords="1276,904,1440,931"/>
<area shape="rect" id="node32" href="page-core_8c.html#ac83a1e6226d94796ae5f6547f4a0d46e" title="initialize the page ftl&#39;s segment data only " alt="" coords="816,195,997,221"/>
<area shape="rect" id="node33" href="bits_8h.html#ad84d9bdcf049c4506dd5874cda1af75b" title="reset the index position bit in the array(uint64_t) " alt="" coords="426,903,498,929"/>
<area shape="rect" id="node25" href="page-gc_8c.html#a32e9cc6ed74c5738778258646318689c" title="page ftl gc list compare function " alt="" coords="609,891,755,917"/>
<area shape="rect" id="node28" href="page-gc_8c.html#a7b41b01d0db54c3dee22e70395069437" title="read the valid pages from the garbage collection target segment " alt="" coords="1052,853,1221,880"/>
<area shape="rect" id="node29" href="page-gc_8c.html#a9009732dc94fb779c60c513436f64430" title="write valid page to the other segment. " alt="" coords="596,764,768,791"/>
<area shape="rect" id="node31" href="page-gc_8c.html#a5313c350f6da799b37eb48aee2f56bb6" title="erase&#39;s end request function " alt="" coords="1489,904,1643,931"/>
</map>
</div>

</div>
</div>
<a id="afeeb8d41fa2a355257f9481f7dbebf5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeeb8d41fa2a355257f9481f7dbebf5e">&#9670;&nbsp;</a></span>page_ftl_update_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_update_map </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ppn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a73bf7114db73929c2d07a22ea85a7616"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73bf7114db73929c2d07a22ea85a7616">&#9670;&nbsp;</a></span>page_ftl_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t page_ftl_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdevice__request.html">device_request</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the core logic for writing the request to the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page FTL structure </td></tr>
    <tr><td class="paramname">request</td><td>user's request pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>writing data size. a negative number means fail to write. </dd></dl>
<p>&lt; global data retrieve </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page_8h_a73bf7114db73929c2d07a22ea85a7616_cgraph.png" border="0" usemap="#page_8h_a73bf7114db73929c2d07a22ea85a7616_cgraph" alt=""/></div>
<map name="page_8h_a73bf7114db73929c2d07a22ea85a7616_cgraph" id="page_8h_a73bf7114db73929c2d07a22ea85a7616_cgraph">
<area shape="rect" id="node2" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="1020,380,1171,406"/>
<area shape="rect" id="node3" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde" title="page_ftl_get_lpn" alt="" coords="611,430,729,457"/>
<area shape="rect" id="node4" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1" title="page_ftl_get_page_offset" alt="" coords="796,304,964,330"/>
<area shape="rect" id="node5" href="page_8h.html#a61bc58daf39db2b8c7f6bb19759009f6" title="page_ftl_get_map_size" alt="" coords="592,532,748,558"/>
<area shape="rect" id="node10" href="page-map_8c.html#a8fe47cde6e9eb1b204962acc947fdea1" title="get page from the segment " alt="" coords="387,684,544,710"/>
<area shape="rect" id="node14" href="page-write_8c.html#a09792980732a097d9cc66cb6c3c4040a" title="read sequence for overwrite " alt="" coords="156,138,339,165"/>
<area shape="rect" id="node18" href="device_8c.html#a6cbe2f795a41e9ae8c71376e4795d92b" title="free pre&#45;allocated device_request resource " alt="" coords="811,126,949,153"/>
<area shape="rect" id="node19" href="page-write_8c.html#a8d2d0a683ff0be97794fbb2e0ce6004f" title="write&#39;s end request function " alt="" coords="173,506,322,533"/>
<area shape="rect" id="node6" href="device_8h.html#a15af0f7c6b80a25259e946db845be12c" title="total size of a flash board " alt="" coords="806,604,954,630"/>
<area shape="rect" id="node7" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="1012,772,1179,798"/>
<area shape="rect" id="node8" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="1019,608,1171,650"/>
<area shape="rect" id="node9" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="1227,608,1381,650"/>
<area shape="rect" id="node11" href="bits_8h.html#ae60fba86e169d5ef568c6047af9cc63e" title="get the value at the index position bit in the array(uint64_t) " alt="" coords="639,633,701,660"/>
<area shape="rect" id="node12" href="bits_8h.html#a901b6fd3c6e09b38c7a27865af23eb92" title="find first zero bit in the array(uint64_t) " alt="" coords="607,734,733,761"/>
<area shape="rect" id="node13" href="bits_8h.html#aa5915f57e508850b40fd9e781dcfea87" title="set the index position bit in the array(uint64_t) " alt="" coords="639,582,701,609"/>
<area shape="rect" id="node15" href="device_8c.html#ab0d1f54cae818ed37ccb6534be902a90" title="dynamic allocate the device request " alt="" coords="598,76,742,102"/>
<area shape="rect" id="node16" href="page-read_8c.html#a03ada441cc7b7264607a4f25210fee3d" title="the core logic for reading the request to the device. " alt="" coords="415,177,515,204"/>
<area shape="rect" id="node17" href="page-read_8c.html#afe456b0f3da74e3799f11e5a0ec9bf00" title="read&#39;s end request function " alt="" coords="597,228,743,254"/>
<area shape="rect" id="node20" href="page-write_8c.html#a0a11d5c177574a23b47088506c37cd06" title="invalidate a segment that including to the given LPN " alt="" coords="400,633,531,660"/>
<area shape="rect" id="node21" href="page-map_8c.html#aea2d0d45aa9856c1113d5344678a368e" title="update the mapping information " alt="" coords="392,532,539,558"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
