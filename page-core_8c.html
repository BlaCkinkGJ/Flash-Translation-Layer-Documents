<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Flash Translation Layer: ftl/page/page-core.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Flash Translation Layer
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e69bfb2f400245dffa08ca51b24524bb.html">ftl</a></li><li class="navelem"><a class="el" href="dir_50a5da8f8ec38dfa969418eaa4863e48.html">page</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">page-core.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>core logic for page ftl  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="device_8h_source.html">include/device.h</a>&quot;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;glib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="page_8h_source.html">include/page.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log_8h_source.html">include/log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="bits_8h_source.html">include/bits.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for page-core.c:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c__incl.png" border="0" usemap="#ftl_2page_2page-core_8c" alt=""/></div>
<map name="ftl_2page_2page-core_8c" id="ftl_2page_2page-core_8c">
<area shape="rect" id="node2" href="device_8h.html" title="contain the device information header " alt="" coords="228,155,344,181"/>
<area shape="rect" id="node7" href="log_8h.html" title="include/log.h" alt="" coords="5,229,100,256"/>
<area shape="rect" id="node13" href="page_8h.html" title="declaration of data structures and macros for page ftl " alt="" coords="558,80,665,107"/>
<area shape="rect" id="node17" href="bits_8h.html" title="include/bits.h" alt="" coords="689,80,787,107"/>
<area shape="rect" id="node16" href="flash_8h.html" title="generic flash control interfaces&#39; header " alt="" coords="513,155,574,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a69bce08fb2866af2d8383db2c6e990d6"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#a69bce08fb2866af2d8383db2c6e990d6">page_ftl_get_invalid_pages</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl)</td></tr>
<tr class="memdesc:a69bce08fb2866af2d8383db2c6e990d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">get number of invalid pages in the ftl  <a href="#a69bce08fb2866af2d8383db2c6e990d6">More...</a><br /></td></tr>
<tr class="separator:a69bce08fb2866af2d8383db2c6e990d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81269dd3e45836a6fa35f393529d3ed9"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#a81269dd3e45836a6fa35f393529d3ed9">page_ftl_gc_from_list</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl, struct <a class="el" href="structdevice__request.html">device_request</a> *request)</td></tr>
<tr class="memdesc:a81269dd3e45836a6fa35f393529d3ed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">do garbage collection from the gc list  <a href="#a81269dd3e45836a6fa35f393529d3ed9">More...</a><br /></td></tr>
<tr class="separator:a81269dd3e45836a6fa35f393529d3ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526b3bc932d94378272a2f898dbc6a14"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#a526b3bc932d94378272a2f898dbc6a14">page_ftl_gc_thread</a> (void *data)</td></tr>
<tr class="memdesc:a526b3bc932d94378272a2f898dbc6a14"><td class="mdescLeft">&#160;</td><td class="mdescRight">do garbage collection thread  <a href="#a526b3bc932d94378272a2f898dbc6a14">More...</a><br /></td></tr>
<tr class="separator:a526b3bc932d94378272a2f898dbc6a14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa74b6b9f6773b961bf1bb7d675870073"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#aa74b6b9f6773b961bf1bb7d675870073">page_ftl_alloc_bitmap</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl, uint64_t **bitmap)</td></tr>
<tr class="memdesc:aa74b6b9f6773b961bf1bb7d675870073"><td class="mdescLeft">&#160;</td><td class="mdescRight">allocate the segment's bitmap  <a href="#aa74b6b9f6773b961bf1bb7d675870073">More...</a><br /></td></tr>
<tr class="separator:aa74b6b9f6773b961bf1bb7d675870073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83a1e6226d94796ae5f6547f4a0d46e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#ac83a1e6226d94796ae5f6547f4a0d46e">page_ftl_segment_data_init</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl, struct <a class="el" href="structpage__ftl__segment.html">page_ftl_segment</a> *segment)</td></tr>
<tr class="memdesc:ac83a1e6226d94796ae5f6547f4a0d46e"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize the page ftl's segment data only  <a href="#ac83a1e6226d94796ae5f6547f4a0d46e">More...</a><br /></td></tr>
<tr class="separator:ac83a1e6226d94796ae5f6547f4a0d46e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ca5832ac120621b6758f42b1bf34a0c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#a0ca5832ac120621b6758f42b1bf34a0c">page_ftl_init_segment</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl)</td></tr>
<tr class="memdesc:a0ca5832ac120621b6758f42b1bf34a0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize each segment's metadata  <a href="#a0ca5832ac120621b6758f42b1bf34a0c">More...</a><br /></td></tr>
<tr class="separator:a0ca5832ac120621b6758f42b1bf34a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0732aa17365ec86acc7935159e41644c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#a0732aa17365ec86acc7935159e41644c">page_ftl_open</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl, const char *name, int flags)</td></tr>
<tr class="memdesc:a0732aa17365ec86acc7935159e41644c"><td class="mdescLeft">&#160;</td><td class="mdescRight">allocate the page ftl structure's members  <a href="#a0732aa17365ec86acc7935159e41644c">More...</a><br /></td></tr>
<tr class="separator:a0732aa17365ec86acc7935159e41644c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab52afda690c5581b1d51778b8ff5d710"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#ab52afda690c5581b1d51778b8ff5d710">page_ftl_submit_request</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl, struct <a class="el" href="structdevice__request.html">device_request</a> *request)</td></tr>
<tr class="memdesc:ab52afda690c5581b1d51778b8ff5d710"><td class="mdescLeft">&#160;</td><td class="mdescRight">submit the request to the valid function  <a href="#ab52afda690c5581b1d51778b8ff5d710">More...</a><br /></td></tr>
<tr class="separator:ab52afda690c5581b1d51778b8ff5d710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e6f0f95185fdb010a5bacb80ed30d0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#a60e6f0f95185fdb010a5bacb80ed30d0">page_ftl_free_segments</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl)</td></tr>
<tr class="memdesc:a60e6f0f95185fdb010a5bacb80ed30d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">deallocate the ftl's segments  <a href="#a60e6f0f95185fdb010a5bacb80ed30d0">More...</a><br /></td></tr>
<tr class="separator:a60e6f0f95185fdb010a5bacb80ed30d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd22f5acb8a0cede652c46ee5229e504"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#abd22f5acb8a0cede652c46ee5229e504">page_ftl_close</a> (struct <a class="el" href="structpage__ftl.html">page_ftl</a> *pgftl)</td></tr>
<tr class="memdesc:abd22f5acb8a0cede652c46ee5229e504"><td class="mdescLeft">&#160;</td><td class="mdescRight">deallocate the page ftl structure's members  <a href="#abd22f5acb8a0cede652c46ee5229e504">More...</a><br /></td></tr>
<tr class="separator:abd22f5acb8a0cede652c46ee5229e504"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a721fa13825f6980506cb447faf67cabe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="page-core_8c.html#a721fa13825f6980506cb447faf67cabe">is_gc_thread_exit</a></td></tr>
<tr class="separator:a721fa13825f6980506cb447faf67cabe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>core logic for page ftl </p>
<dl class="section author"><dt>Author</dt><dd>Gijun Oh </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2021-09-22 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa74b6b9f6773b961bf1bb7d675870073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa74b6b9f6773b961bf1bb7d675870073">&#9670;&nbsp;</a></span>page_ftl_alloc_bitmap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int page_ftl_alloc_bitmap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t **&#160;</td>
          <td class="paramname"><em>bitmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>allocate the segment's bitmap </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page-ftl structure </td></tr>
    <tr><td class="paramname">bitmap</td><td>double pointer of the bitmap</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for successfully allocated </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_aa74b6b9f6773b961bf1bb7d675870073_cgraph.png" border="0" usemap="#page-core_8c_aa74b6b9f6773b961bf1bb7d675870073_cgraph" alt=""/></div>
<map name="page-core_8c_aa74b6b9f6773b961bf1bb7d675870073_cgraph" id="page-core_8c_aa74b6b9f6773b961bf1bb7d675870073_cgraph">
<area shape="rect" id="node2" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="201,5,353,47"/>
<area shape="rect" id="node3" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="401,5,556,47"/>
</map>
</div>

</div>
</div>
<a id="abd22f5acb8a0cede652c46ee5229e504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd22f5acb8a0cede652c46ee5229e504">&#9670;&nbsp;</a></span>page_ftl_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>deallocate the page ftl structure's members </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page ftl structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero to success, negative number to fail </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_abd22f5acb8a0cede652c46ee5229e504_cgraph.png" border="0" usemap="#page-core_8c_abd22f5acb8a0cede652c46ee5229e504_cgraph" alt=""/></div>
<map name="page-core_8c_abd22f5acb8a0cede652c46ee5229e504_cgraph" id="page-core_8c_abd22f5acb8a0cede652c46ee5229e504_cgraph">
<area shape="rect" id="node2" href="page-core_8c.html#a60e6f0f95185fdb010a5bacb80ed30d0" title="deallocate the ftl&#39;s segments " alt="" coords="160,5,321,32"/>
<area shape="rect" id="node3" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="369,5,536,32"/>
</map>
</div>

</div>
</div>
<a id="a60e6f0f95185fdb010a5bacb80ed30d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60e6f0f95185fdb010a5bacb80ed30d0">&#9670;&nbsp;</a></span>page_ftl_free_segments()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void page_ftl_free_segments </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>deallocate the ftl's segments </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segments</td><td>pointer of the segment array </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_a60e6f0f95185fdb010a5bacb80ed30d0_cgraph.png" border="0" usemap="#page-core_8c_a60e6f0f95185fdb010a5bacb80ed30d0_cgraph" alt=""/></div>
<map name="page-core_8c_a60e6f0f95185fdb010a5bacb80ed30d0_cgraph" id="page-core_8c_a60e6f0f95185fdb010a5bacb80ed30d0_cgraph">
<area shape="rect" id="node2" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="215,5,381,32"/>
</map>
</div>

</div>
</div>
<a id="a81269dd3e45836a6fa35f393529d3ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81269dd3e45836a6fa35f393529d3ed9">&#9670;&nbsp;</a></span>page_ftl_gc_from_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t page_ftl_gc_from_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdevice__request.html">device_request</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>do garbage collection from the gc list </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page ftl </td></tr>
    <tr><td class="paramname">request</td><td>pointer of the request</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of erased segments </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_a81269dd3e45836a6fa35f393529d3ed9_cgraph.png" border="0" usemap="#page-core_8c_a81269dd3e45836a6fa35f393529d3ed9_cgraph" alt=""/></div>
<map name="page-core_8c_a81269dd3e45836a6fa35f393529d3ed9_cgraph" id="page-core_8c_a81269dd3e45836a6fa35f393529d3ed9_cgraph">
<area shape="rect" id="node2" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="2103,495,2269,521"/>
<area shape="rect" id="node3" href="page-core_8c.html#ab52afda690c5581b1d51778b8ff5d710" title="submit the request to the valid function " alt="" coords="200,296,364,323"/>
<area shape="rect" id="node4" href="page-write_8c.html#a0c8aa8e7f9a23fe3033211f0f03e03b0" title="the core logic for writing the request to the device. " alt="" coords="1050,764,1153,791"/>
<area shape="rect" id="node18" href="page-read_8c.html#a03ada441cc7b7264607a4f25210fee3d" title="the core logic for reading the request to the device. " alt="" coords="1503,448,1603,475"/>
<area shape="rect" id="node24" href="page-gc_8c.html#a39db89445047112690d03d8211a53966" title="core logic of the garbage collection " alt="" coords="412,195,523,221"/>
<area shape="rect" id="node5" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="2111,803,2261,829"/>
<area shape="rect" id="node6" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde" title="page_ftl_get_lpn" alt="" coords="1702,904,1819,931"/>
<area shape="rect" id="node7" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1" title="page_ftl_get_page_offset" alt="" coords="1887,752,2055,779"/>
<area shape="rect" id="node8" href="page_8h.html#a61bc58daf39db2b8c7f6bb19759009f6" title="page_ftl_get_map_size" alt="" coords="1683,853,1839,880"/>
<area shape="rect" id="node12" href="page-map_8c.html#a8fe47cde6e9eb1b204962acc947fdea1" title="get page from the segment " alt="" coords="1474,651,1631,677"/>
<area shape="rect" id="node16" href="page-write_8c.html#a09792980732a097d9cc66cb6c3c4040a" title="read sequence for overwrite " alt="" coords="1240,536,1423,563"/>
<area shape="rect" id="node20" href="device_8c.html#a6cbe2f795a41e9ae8c71376e4795d92b" title="free pre&#45;allocated device_request resource " alt="" coords="1901,195,2040,221"/>
<area shape="rect" id="node21" href="page-write_8c.html#a8d2d0a683ff0be97794fbb2e0ce6004f" title="write&#39;s end request function " alt="" coords="1257,853,1406,880"/>
<area shape="rect" id="node9" href="device_8h.html#a15af0f7c6b80a25259e946db845be12c" title="total size of a flash board " alt="" coords="1897,600,2045,627"/>
<area shape="rect" id="node10" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="2110,546,2262,587"/>
<area shape="rect" id="node11" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="2317,546,2472,587"/>
<area shape="rect" id="node13" href="bits_8h.html#ae60fba86e169d5ef568c6047af9cc63e" title="get the value at the index position bit in the array(uint64_t) " alt="" coords="1730,752,1791,779"/>
<area shape="rect" id="node14" href="bits_8h.html#a901b6fd3c6e09b38c7a27865af23eb92" title="find first zero bit in the array(uint64_t) " alt="" coords="1698,651,1823,677"/>
<area shape="rect" id="node15" href="bits_8h.html#aa5915f57e508850b40fd9e781dcfea87" title="set the index position bit in the array(uint64_t) " alt="" coords="1730,701,1791,728"/>
<area shape="rect" id="node17" href="device_8c.html#ab0d1f54cae818ed37ccb6534be902a90" title="dynamic allocate the device request " alt="" coords="1689,296,1833,323"/>
<area shape="rect" id="node19" href="page-read_8c.html#afe456b0f3da74e3799f11e5a0ec9bf00" title="read&#39;s end request function " alt="" coords="1687,448,1834,475"/>
<area shape="rect" id="node22" href="page-write_8c.html#a0a11d5c177574a23b47088506c37cd06" title="invalidate a segment that including to the given LPN " alt="" coords="1487,701,1618,728"/>
<area shape="rect" id="node23" href="page-map_8c.html#aea2d0d45aa9856c1113d5344678a368e" title="update the mapping information " alt="" coords="1479,853,1626,880"/>
<area shape="rect" id="node25" href="page-gc_8c.html#a0b583abec382c3d87f8c3c34c0c17c1f" title="the function which chooses the appropriate garbage collection target. " alt="" coords="577,195,737,221"/>
<area shape="rect" id="node27" href="page_8h.html#af7343608b290367f04e646ff9314b367" title="page_ftl_get_segment\l_number" alt="" coords="801,230,952,271"/>
<area shape="rect" id="node28" href="page-gc_8c.html#a18170bf83f356c8053389c06e06cbac4" title="core logic of the valid page copy " alt="" coords="571,296,743,323"/>
<area shape="rect" id="node31" href="page-gc_8c.html#a4d1363e2261e7f0d20b90e949707cb32" title="erase the garbage collection target segment " alt="" coords="1471,195,1635,221"/>
<area shape="rect" id="node33" href="page-core_8c.html#ac83a1e6226d94796ae5f6547f4a0d46e" title="initialize the page ftl&#39;s segment data only " alt="" coords="1011,43,1192,69"/>
<area shape="rect" id="node34" href="bits_8h.html#ad84d9bdcf049c4506dd5874cda1af75b" title="reset the index position bit in the array(uint64_t) " alt="" coords="621,144,693,171"/>
<area shape="rect" id="node26" href="page-gc_8c.html#a32e9cc6ed74c5738778258646318689c" title="page ftl gc list compare function " alt="" coords="804,179,949,205"/>
<area shape="rect" id="node29" href="page-gc_8c.html#a7b41b01d0db54c3dee22e70395069437" title="read the valid pages from the garbage collection target segment " alt="" coords="1247,296,1416,323"/>
<area shape="rect" id="node30" href="page-gc_8c.html#a9009732dc94fb779c60c513436f64430" title="write valid page to the other segment. " alt="" coords="791,347,963,373"/>
<area shape="rect" id="node32" href="page-gc_8c.html#a5313c350f6da799b37eb48aee2f56bb6" title="erase&#39;s end request function " alt="" coords="1684,195,1837,221"/>
</map>
</div>

</div>
</div>
<a id="a526b3bc932d94378272a2f898dbc6a14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a526b3bc932d94378272a2f898dbc6a14">&#9670;&nbsp;</a></span>page_ftl_gc_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* page_ftl_gc_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>do garbage collection thread </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>containing the pointer of the page ftl structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_a526b3bc932d94378272a2f898dbc6a14_cgraph.png" border="0" usemap="#page-core_8c_a526b3bc932d94378272a2f898dbc6a14_cgraph" alt=""/></div>
<map name="page-core_8c_a526b3bc932d94378272a2f898dbc6a14_cgraph" id="page-core_8c_a526b3bc932d94378272a2f898dbc6a14_cgraph">
<area shape="rect" id="node2" href="device_8h.html#ac5b7db8e4737e5887fb5fc21ec67ffe6" title="get total the number of pages in a flash board " alt="" coords="1863,448,2021,475"/>
<area shape="rect" id="node8" href="page-core_8c.html#a69bce08fb2866af2d8383db2c6e990d6" title="get number of invalid pages in the ftl " alt="" coords="393,83,531,125"/>
<area shape="rect" id="node9" href="page-core_8c.html#a81269dd3e45836a6fa35f393529d3ed9" title="do garbage collection from the gc list " alt="" coords="185,399,332,425"/>
<area shape="rect" id="node3" href="device_8h.html#a15af0f7c6b80a25259e946db845be12c" title="total size of a flash board " alt="" coords="2079,397,2227,424"/>
<area shape="rect" id="node7" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="2293,625,2444,652"/>
<area shape="rect" id="node4" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="2285,245,2452,272"/>
<area shape="rect" id="node5" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="2293,111,2445,153"/>
<area shape="rect" id="node6" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="2500,111,2655,153"/>
<area shape="rect" id="node10" href="page-core_8c.html#ab52afda690c5581b1d51778b8ff5d710" title="submit the request to the valid function " alt="" coords="380,777,544,804"/>
<area shape="rect" id="node11" href="page-write_8c.html#a0c8aa8e7f9a23fe3033211f0f03e03b0" title="the core logic for writing the request to the device. " alt="" coords="1230,625,1333,652"/>
<area shape="rect" id="node21" href="page-read_8c.html#a03ada441cc7b7264607a4f25210fee3d" title="the core logic for reading the request to the device. " alt="" coords="1683,701,1783,728"/>
<area shape="rect" id="node27" href="page-gc_8c.html#a39db89445047112690d03d8211a53966" title="core logic of the garbage collection " alt="" coords="592,912,703,939"/>
<area shape="rect" id="node12" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde" title="page_ftl_get_lpn" alt="" coords="1883,499,2001,525"/>
<area shape="rect" id="node13" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1" title="page_ftl_get_page_offset" alt="" coords="2069,701,2237,728"/>
<area shape="rect" id="node14" href="page_8h.html#a61bc58daf39db2b8c7f6bb19759009f6" title="page_ftl_get_map_size" alt="" coords="1864,397,2020,424"/>
<area shape="rect" id="node15" href="page-map_8c.html#a8fe47cde6e9eb1b204962acc947fdea1" title="get page from the segment " alt="" coords="1654,245,1811,272"/>
<area shape="rect" id="node19" href="page-write_8c.html#a09792980732a097d9cc66cb6c3c4040a" title="read sequence for overwrite " alt="" coords="1420,676,1603,703"/>
<area shape="rect" id="node23" href="device_8c.html#a6cbe2f795a41e9ae8c71376e4795d92b" title="free pre&#45;allocated device_request resource " alt="" coords="2084,853,2223,880"/>
<area shape="rect" id="node24" href="page-write_8c.html#a8d2d0a683ff0be97794fbb2e0ce6004f" title="write&#39;s end request function " alt="" coords="1437,397,1586,424"/>
<area shape="rect" id="node16" href="bits_8h.html#ae60fba86e169d5ef568c6047af9cc63e" title="get the value at the index position bit in the array(uint64_t) " alt="" coords="1911,296,1973,323"/>
<area shape="rect" id="node17" href="bits_8h.html#a901b6fd3c6e09b38c7a27865af23eb92" title="find first zero bit in the array(uint64_t) " alt="" coords="1879,245,2005,272"/>
<area shape="rect" id="node18" href="bits_8h.html#aa5915f57e508850b40fd9e781dcfea87" title="set the index position bit in the array(uint64_t) " alt="" coords="1911,347,1973,373"/>
<area shape="rect" id="node20" href="device_8c.html#ab0d1f54cae818ed37ccb6534be902a90" title="dynamic allocate the device request " alt="" coords="1870,904,2014,931"/>
<area shape="rect" id="node22" href="page-read_8c.html#afe456b0f3da74e3799f11e5a0ec9bf00" title="read&#39;s end request function " alt="" coords="1869,752,2015,779"/>
<area shape="rect" id="node25" href="page-write_8c.html#a0a11d5c177574a23b47088506c37cd06" title="invalidate a segment that including to the given LPN " alt="" coords="1667,296,1798,323"/>
<area shape="rect" id="node26" href="page-map_8c.html#aea2d0d45aa9856c1113d5344678a368e" title="update the mapping information " alt="" coords="1659,397,1806,424"/>
<area shape="rect" id="node28" href="page-gc_8c.html#a0b583abec382c3d87f8c3c34c0c17c1f" title="the function which chooses the appropriate garbage collection target. " alt="" coords="757,1013,917,1040"/>
<area shape="rect" id="node30" href="page_8h.html#af7343608b290367f04e646ff9314b367" title="page_ftl_get_segment\l_number" alt="" coords="981,955,1132,997"/>
<area shape="rect" id="node31" href="page-gc_8c.html#a18170bf83f356c8053389c06e06cbac4" title="core logic of the valid page copy " alt="" coords="751,861,923,888"/>
<area shape="rect" id="node34" href="page-gc_8c.html#a4d1363e2261e7f0d20b90e949707cb32" title="erase the garbage collection target segment " alt="" coords="1651,955,1815,981"/>
<area shape="rect" id="node36" href="page-core_8c.html#ac83a1e6226d94796ae5f6547f4a0d46e" title="initialize the page ftl&#39;s segment data only " alt="" coords="1191,436,1372,463"/>
<area shape="rect" id="node37" href="bits_8h.html#ad84d9bdcf049c4506dd5874cda1af75b" title="reset the index position bit in the array(uint64_t) " alt="" coords="801,963,873,989"/>
<area shape="rect" id="node29" href="page-gc_8c.html#a32e9cc6ed74c5738778258646318689c" title="page ftl gc list compare function " alt="" coords="984,1021,1129,1048"/>
<area shape="rect" id="node32" href="page-gc_8c.html#a7b41b01d0db54c3dee22e70395069437" title="read the valid pages from the garbage collection target segment " alt="" coords="1427,904,1596,931"/>
<area shape="rect" id="node33" href="page-gc_8c.html#a9009732dc94fb779c60c513436f64430" title="write valid page to the other segment. " alt="" coords="971,853,1143,880"/>
<area shape="rect" id="node35" href="page-gc_8c.html#a5313c350f6da799b37eb48aee2f56bb6" title="erase&#39;s end request function " alt="" coords="1865,955,2019,981"/>
</map>
</div>

</div>
</div>
<a id="a69bce08fb2866af2d8383db2c6e990d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69bce08fb2866af2d8383db2c6e990d6">&#9670;&nbsp;</a></span>page_ftl_get_invalid_pages()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t page_ftl_get_invalid_pages </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get number of invalid pages in the ftl </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page ftl structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of the invalid pages </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_a69bce08fb2866af2d8383db2c6e990d6_cgraph.png" border="0" usemap="#page-core_8c_a69bce08fb2866af2d8383db2c6e990d6_cgraph" alt=""/></div>
<map name="page-core_8c_a69bce08fb2866af2d8383db2c6e990d6_cgraph" id="page-core_8c_a69bce08fb2866af2d8383db2c6e990d6_cgraph">
<area shape="rect" id="node2" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="191,5,343,47"/>
<area shape="rect" id="node3" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="391,5,545,47"/>
</map>
</div>

</div>
</div>
<a id="a0ca5832ac120621b6758f42b1bf34a0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ca5832ac120621b6758f42b1bf34a0c">&#9670;&nbsp;</a></span>page_ftl_init_segment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int page_ftl_init_segment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>initialize each segment's metadata </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page ftl structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 to success, negative value to fail </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_a0ca5832ac120621b6758f42b1bf34a0c_cgraph.png" border="0" usemap="#page-core_8c_a0ca5832ac120621b6758f42b1bf34a0c_cgraph" alt=""/></div>
<map name="page-core_8c_a0ca5832ac120621b6758f42b1bf34a0c_cgraph" id="page-core_8c_a0ca5832ac120621b6758f42b1bf34a0c_cgraph">
<area shape="rect" id="node2" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="210,5,377,32"/>
<area shape="rect" id="node3" href="page-core_8c.html#aa74b6b9f6773b961bf1bb7d675870073" title="allocate the segment&#39;s bitmap " alt="" coords="219,56,367,83"/>
<area shape="rect" id="node4" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="432,99,584,141"/>
<area shape="rect" id="node6" href="page-core_8c.html#ac83a1e6226d94796ae5f6547f4a0d46e" title="initialize the page ftl&#39;s segment data only " alt="" coords="203,157,384,184"/>
<area shape="rect" id="node5" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="632,99,787,141"/>
</map>
</div>

</div>
</div>
<a id="a0732aa17365ec86acc7935159e41644c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0732aa17365ec86acc7935159e41644c">&#9670;&nbsp;</a></span>page_ftl_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allocate the page ftl structure's members </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page ftl structure </td></tr>
    <tr><td class="paramname">name</td><td>file's name for open </td></tr>
    <tr><td class="paramname">flags</td><td>flags for open</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero to success, negative number to fail</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>you must make a recovery process </dd></dl>
<p>initialize the mapping table </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_a0732aa17365ec86acc7935159e41644c_cgraph.png" border="0" usemap="#page-core_8c_a0732aa17365ec86acc7935159e41644c_cgraph" alt=""/></div>
<map name="page-core_8c_a0732aa17365ec86acc7935159e41644c_cgraph" id="page-core_8c_a0732aa17365ec86acc7935159e41644c_cgraph">
<area shape="rect" id="node2" href="page_8h.html#a61bc58daf39db2b8c7f6bb19759009f6" title="page_ftl_get_map_size" alt="" coords="1987,512,2143,539"/>
<area shape="rect" id="node4" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="2421,132,2588,159"/>
<area shape="rect" id="node8" href="page-core_8c.html#a0ca5832ac120621b6758f42b1bf34a0c" title="initialize each segment&#39;s metadata " alt="" coords="1990,259,2139,285"/>
<area shape="rect" id="node11" href="page-core_8c.html#a526b3bc932d94378272a2f898dbc6a14" title="do garbage collection thread " alt="" coords="156,949,288,976"/>
<area shape="rect" id="node41" href="page-core_8c.html#abd22f5acb8a0cede652c46ee5229e504" title="deallocate the page ftl structure&#39;s members " alt="" coords="356,5,463,32"/>
<area shape="rect" id="node3" href="device_8h.html#a15af0f7c6b80a25259e946db845be12c" title="total size of a flash board " alt="" coords="2209,512,2357,539"/>
<area shape="rect" id="node7" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="2429,892,2580,919"/>
<area shape="rect" id="node5" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="2429,378,2581,419"/>
<area shape="rect" id="node6" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="2636,378,2791,419"/>
<area shape="rect" id="node9" href="page-core_8c.html#aa74b6b9f6773b961bf1bb7d675870073" title="allocate the segment&#39;s bitmap " alt="" coords="2209,309,2357,336"/>
<area shape="rect" id="node10" href="page-core_8c.html#ac83a1e6226d94796ae5f6547f4a0d46e" title="initialize the page ftl&#39;s segment data only " alt="" coords="2192,360,2373,387"/>
<area shape="rect" id="node12" href="device_8h.html#ac5b7db8e4737e5887fb5fc21ec67ffe6" title="get total the number of pages in a flash board " alt="" coords="1985,917,2144,944"/>
<area shape="rect" id="node13" href="page-core_8c.html#a69bce08fb2866af2d8383db2c6e990d6" title="get number of invalid pages in the ftl " alt="" coords="544,990,681,1031"/>
<area shape="rect" id="node14" href="page-core_8c.html#a81269dd3e45836a6fa35f393529d3ed9" title="do garbage collection from the gc list " alt="" coords="336,917,483,944"/>
<area shape="rect" id="node15" href="page-core_8c.html#ab52afda690c5581b1d51778b8ff5d710" title="submit the request to the valid function " alt="" coords="531,917,695,944"/>
<area shape="rect" id="node16" href="page-write_8c.html#a0c8aa8e7f9a23fe3033211f0f03e03b0" title="the core logic for writing the request to the device. " alt="" coords="1392,841,1495,868"/>
<area shape="rect" id="node25" href="page-read_8c.html#a03ada441cc7b7264607a4f25210fee3d" title="the core logic for reading the request to the device. " alt="" coords="1805,1272,1905,1299"/>
<area shape="rect" id="node31" href="page-gc_8c.html#a39db89445047112690d03d8211a53966" title="core logic of the garbage collection " alt="" coords="768,715,879,741"/>
<area shape="rect" id="node17" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde" title="page_ftl_get_lpn" alt="" coords="2006,816,2123,843"/>
<area shape="rect" id="node18" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1" title="page_ftl_get_page_offset" alt="" coords="2199,1272,2367,1299"/>
<area shape="rect" id="node19" href="page-map_8c.html#a8fe47cde6e9eb1b204962acc947fdea1" title="get page from the segment " alt="" coords="1777,563,1934,589"/>
<area shape="rect" id="node23" href="page-write_8c.html#a09792980732a097d9cc66cb6c3c4040a" title="read sequence for overwrite " alt="" coords="1543,1019,1725,1045"/>
<area shape="rect" id="node27" href="device_8c.html#a6cbe2f795a41e9ae8c71376e4795d92b" title="free pre&#45;allocated device_request resource " alt="" coords="2213,1196,2352,1223"/>
<area shape="rect" id="node28" href="page-write_8c.html#a8d2d0a683ff0be97794fbb2e0ce6004f" title="write&#39;s end request function " alt="" coords="1559,765,1709,792"/>
<area shape="rect" id="node20" href="bits_8h.html#ae60fba86e169d5ef568c6047af9cc63e" title="get the value at the index position bit in the array(uint64_t) " alt="" coords="2034,664,2095,691"/>
<area shape="rect" id="node21" href="bits_8h.html#a901b6fd3c6e09b38c7a27865af23eb92" title="find first zero bit in the array(uint64_t) " alt="" coords="2002,563,2127,589"/>
<area shape="rect" id="node22" href="bits_8h.html#aa5915f57e508850b40fd9e781dcfea87" title="set the index position bit in the array(uint64_t) " alt="" coords="2034,613,2095,640"/>
<area shape="rect" id="node24" href="device_8c.html#ab0d1f54cae818ed37ccb6534be902a90" title="dynamic allocate the device request " alt="" coords="1993,1095,2137,1121"/>
<area shape="rect" id="node26" href="page-read_8c.html#afe456b0f3da74e3799f11e5a0ec9bf00" title="read&#39;s end request function " alt="" coords="1991,1247,2138,1273"/>
<area shape="rect" id="node29" href="page-write_8c.html#a0a11d5c177574a23b47088506c37cd06" title="invalidate a segment that including to the given LPN " alt="" coords="1790,613,1921,640"/>
<area shape="rect" id="node30" href="page-map_8c.html#aea2d0d45aa9856c1113d5344678a368e" title="update the mapping information " alt="" coords="1782,715,1929,741"/>
<area shape="rect" id="node32" href="page-gc_8c.html#a0b583abec382c3d87f8c3c34c0c17c1f" title="the function which chooses the appropriate garbage collection target. " alt="" coords="958,664,1118,691"/>
<area shape="rect" id="node34" href="page_8h.html#af7343608b290367f04e646ff9314b367" title="page_ftl_get_segment\l_number" alt="" coords="1183,699,1333,741"/>
<area shape="rect" id="node35" href="page-gc_8c.html#a18170bf83f356c8053389c06e06cbac4" title="core logic of the valid page copy " alt="" coords="952,816,1124,843"/>
<area shape="rect" id="node38" href="page-gc_8c.html#a4d1363e2261e7f0d20b90e949707cb32" title="erase the garbage collection target segment " alt="" coords="1773,1069,1937,1096"/>
<area shape="rect" id="node40" href="bits_8h.html#ad84d9bdcf049c4506dd5874cda1af75b" title="reset the index position bit in the array(uint64_t) " alt="" coords="1002,613,1074,640"/>
<area shape="rect" id="node33" href="page-gc_8c.html#a32e9cc6ed74c5738778258646318689c" title="page ftl gc list compare function " alt="" coords="1185,648,1331,675"/>
<area shape="rect" id="node36" href="page-gc_8c.html#a7b41b01d0db54c3dee22e70395069437" title="read the valid pages from the garbage collection target segment " alt="" coords="1549,1272,1719,1299"/>
<area shape="rect" id="node37" href="page-gc_8c.html#a9009732dc94fb779c60c513436f64430" title="write valid page to the other segment. " alt="" coords="1172,841,1344,868"/>
<area shape="rect" id="node39" href="page-gc_8c.html#a5313c350f6da799b37eb48aee2f56bb6" title="erase&#39;s end request function " alt="" coords="1988,1044,2141,1071"/>
<area shape="rect" id="node42" href="page-core_8c.html#a60e6f0f95185fdb010a5bacb80ed30d0" title="deallocate the ftl&#39;s segments " alt="" coords="743,5,904,32"/>
</map>
</div>

</div>
</div>
<a id="ac83a1e6226d94796ae5f6547f4a0d46e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac83a1e6226d94796ae5f6547f4a0d46e">&#9670;&nbsp;</a></span>page_ftl_segment_data_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int page_ftl_segment_data_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl__segment.html">page_ftl_segment</a> *&#160;</td>
          <td class="paramname"><em>segment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize the page ftl's segment data only </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page-ftl structure </td></tr>
    <tr><td class="paramname">segment</td><td>pointer of the target segment</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for successfully initialized </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_ac83a1e6226d94796ae5f6547f4a0d46e_cgraph.png" border="0" usemap="#page-core_8c_ac83a1e6226d94796ae5f6547f4a0d46e_cgraph" alt=""/></div>
<map name="page-core_8c_ac83a1e6226d94796ae5f6547f4a0d46e_cgraph" id="page-core_8c_ac83a1e6226d94796ae5f6547f4a0d46e_cgraph">
<area shape="rect" id="node2" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="235,5,387,47"/>
<area shape="rect" id="node3" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="435,5,589,47"/>
</map>
</div>

</div>
</div>
<a id="ab52afda690c5581b1d51778b8ff5d710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab52afda690c5581b1d51778b8ff5d710">&#9670;&nbsp;</a></span>page_ftl_submit_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t page_ftl_submit_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpage__ftl.html">page_ftl</a> *&#160;</td>
          <td class="paramname"><em>pgftl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdevice__request.html">device_request</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>submit the request to the valid function </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgftl</td><td>pointer of the page ftl structure </td></tr>
    <tr><td class="paramname">request</td><td>pointer of the request</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>read and write return the size of the submit, fail to return the nugative value </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="page-core_8c_ab52afda690c5581b1d51778b8ff5d710_cgraph.png" border="0" usemap="#page-core_8c_ab52afda690c5581b1d51778b8ff5d710_cgraph" alt=""/></div>
<map name="page-core_8c_ab52afda690c5581b1d51778b8ff5d710_cgraph" id="page-core_8c_ab52afda690c5581b1d51778b8ff5d710_cgraph">
<area shape="rect" id="node2" href="page-write_8c.html#a0c8aa8e7f9a23fe3033211f0f03e03b0" title="the core logic for writing the request to the device. " alt="" coords="855,448,958,475"/>
<area shape="rect" id="node17" href="page-read_8c.html#a03ada441cc7b7264607a4f25210fee3d" title="the core logic for reading the request to the device. " alt="" coords="1308,549,1408,576"/>
<area shape="rect" id="node23" href="page-gc_8c.html#a39db89445047112690d03d8211a53966" title="core logic of the garbage collection " alt="" coords="217,852,328,879"/>
<area shape="rect" id="node3" href="device_8h.html#a5abb41e3bd32227e0a51f621e33287ab" title="get flash board&#39;s NAND page size " alt="" coords="1916,499,2067,525"/>
<area shape="rect" id="node4" href="page_8h.html#aa1153880e7edfea4dbb8fcfd23efbfde" title="page_ftl_get_lpn" alt="" coords="1507,397,1625,424"/>
<area shape="rect" id="node5" href="page_8h.html#a1f8fcfefd88c6bc045a4f17bb2fa60b1" title="page_ftl_get_page_offset" alt="" coords="1692,499,1860,525"/>
<area shape="rect" id="node6" href="page_8h.html#a61bc58daf39db2b8c7f6bb19759009f6" title="page_ftl_get_map_size" alt="" coords="1488,347,1644,373"/>
<area shape="rect" id="node11" href="page-map_8c.html#a8fe47cde6e9eb1b204962acc947fdea1" title="get page from the segment " alt="" coords="1279,195,1437,221"/>
<area shape="rect" id="node15" href="page-write_8c.html#a09792980732a097d9cc66cb6c3c4040a" title="read sequence for overwrite " alt="" coords="1045,600,1228,627"/>
<area shape="rect" id="node19" href="device_8c.html#a6cbe2f795a41e9ae8c71376e4795d92b" title="free pre&#45;allocated device_request resource " alt="" coords="1707,752,1845,779"/>
<area shape="rect" id="node20" href="page-write_8c.html#a8d2d0a683ff0be97794fbb2e0ce6004f" title="write&#39;s end request function " alt="" coords="1062,372,1211,399"/>
<area shape="rect" id="node7" href="device_8h.html#a15af0f7c6b80a25259e946db845be12c" title="total size of a flash board " alt="" coords="1702,195,1850,221"/>
<area shape="rect" id="node8" href="device_8h.html#abf898474e5c79a10d883bde5d0a69247" title="get the number of segments in a flash board " alt="" coords="1908,173,2075,200"/>
<area shape="rect" id="node9" href="device_8h.html#a48ead81924272ea2d4a8bd6750435de4" title="get the number of pages in a segment " alt="" coords="1915,86,2067,127"/>
<area shape="rect" id="node10" href="device_8h.html#afe917aa4ec5ca3f277d3b4dea249ac80" title="device_get_blocks_per\l_segment" alt="" coords="2123,86,2277,127"/>
<area shape="rect" id="node12" href="bits_8h.html#ae60fba86e169d5ef568c6047af9cc63e" title="get the value at the index position bit in the array(uint64_t) " alt="" coords="1535,245,1597,272"/>
<area shape="rect" id="node13" href="bits_8h.html#a901b6fd3c6e09b38c7a27865af23eb92" title="find first zero bit in the array(uint64_t) " alt="" coords="1503,195,1629,221"/>
<area shape="rect" id="node14" href="bits_8h.html#aa5915f57e508850b40fd9e781dcfea87" title="set the index position bit in the array(uint64_t) " alt="" coords="1535,296,1597,323"/>
<area shape="rect" id="node16" href="device_8c.html#ab0d1f54cae818ed37ccb6534be902a90" title="dynamic allocate the device request " alt="" coords="1494,803,1638,829"/>
<area shape="rect" id="node18" href="page-read_8c.html#afe456b0f3da74e3799f11e5a0ec9bf00" title="read&#39;s end request function " alt="" coords="1493,549,1639,576"/>
<area shape="rect" id="node21" href="page-write_8c.html#a0a11d5c177574a23b47088506c37cd06" title="invalidate a segment that including to the given LPN " alt="" coords="1293,245,1423,272"/>
<area shape="rect" id="node22" href="page-map_8c.html#aea2d0d45aa9856c1113d5344678a368e" title="update the mapping information " alt="" coords="1285,347,1431,373"/>
<area shape="rect" id="node24" href="page-gc_8c.html#a0b583abec382c3d87f8c3c34c0c17c1f" title="the function which chooses the appropriate garbage collection target. " alt="" coords="382,852,542,879"/>
<area shape="rect" id="node26" href="page_8h.html#af7343608b290367f04e646ff9314b367" title="page_ftl_get_segment\l_number" alt="" coords="607,942,757,983"/>
<area shape="rect" id="node27" href="page-gc_8c.html#a18170bf83f356c8053389c06e06cbac4" title="core logic of the valid page copy " alt="" coords="376,801,548,828"/>
<area shape="rect" id="node30" href="page-gc_8c.html#a4d1363e2261e7f0d20b90e949707cb32" title="erase the garbage collection target segment " alt="" coords="1276,904,1440,931"/>
<area shape="rect" id="node32" href="page-core_8c.html#ac83a1e6226d94796ae5f6547f4a0d46e" title="initialize the page ftl&#39;s segment data only " alt="" coords="816,195,997,221"/>
<area shape="rect" id="node33" href="bits_8h.html#ad84d9bdcf049c4506dd5874cda1af75b" title="reset the index position bit in the array(uint64_t) " alt="" coords="426,903,498,929"/>
<area shape="rect" id="node25" href="page-gc_8c.html#a32e9cc6ed74c5738778258646318689c" title="page ftl gc list compare function " alt="" coords="609,891,755,917"/>
<area shape="rect" id="node28" href="page-gc_8c.html#a7b41b01d0db54c3dee22e70395069437" title="read the valid pages from the garbage collection target segment " alt="" coords="1052,853,1221,880"/>
<area shape="rect" id="node29" href="page-gc_8c.html#a9009732dc94fb779c60c513436f64430" title="write valid page to the other segment. " alt="" coords="596,764,768,791"/>
<area shape="rect" id="node31" href="page-gc_8c.html#a5313c350f6da799b37eb48aee2f56bb6" title="erase&#39;s end request function " alt="" coords="1489,904,1643,931"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a721fa13825f6980506cb447faf67cabe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a721fa13825f6980506cb447faf67cabe">&#9670;&nbsp;</a></span>is_gc_thread_exit</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int is_gc_thread_exit</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
